<?xml version="1.0" encoding="UTF-8"?>

<odoo>
    <record id="view_vehicle_option_list" model="ir.ui.view">
        <field name="name">vehicle.option.list</field>
        <field name="model">vehicle.option</field>
        <field name="arch" type="xml">
            <list string="Vehicle Options">
                <field name="name"/>
                <field name="description"/>
                <field name="active"/>
            </list>
        </field>
    </record>


    <record id="view_vehicle_option_form" model="ir.ui.view">
        <field name="name">vehicle.option.form</field>
        <field name="model">vehicle.option</field>
        <field name="arch" type="xml">
            <form string="Vehicle Option">
                <sheet>
                    <group>
                        <field name="name" required="1"/>
                        <field name="description"/>
                        <field name="active"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>


    <record id="action_vehicle_option" model="ir.actions.act_window">
        <field name="name">Vehicle Options</field>
        <field name="res_model">vehicle.option</field>
        <field name="view_mode">list,form</field>
        <field name="context">{'default_active': True}</field>
        <field name="target">current</field>
    </record>


    <menuitem id="menu_vehicle_option"
              name="Vehicle Options"
              parent="bestcar_commercial.menu_vehicle_configuration"
              action="action_vehicle_option"
              sequence="40"/>


    <record id="view_product_template_form_options_inherit" model="ir.ui.view">
        <field name="name">product.template.form.options.inherit</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"/>
        <field name="arch" type="xml">

            <xpath expr="//sheet/notebook/page[@name='general_information']" position="before">
                <page string="Vehicle Options" name="page_vehicle_options" invisible="not is_vehicle">
                    <group>
                        <!-- LISTA invece dei badge -->
                        <field name="vehicle_option_ids"
                               widget="many2many"
                               domain="[('active','=', True)]"
                               options="{'no_create': True, 'no_create_edit': True, 'no_open': True}">
                            <list string="Options">
                                <field name="name"/>
                                <field name="description"/>
                            </list>
                        </field>
                    </group>
                </page>
            </xpath>
        </field>
    </record>
</odoo>
